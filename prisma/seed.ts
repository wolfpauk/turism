import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
  console.log('üå± –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...')

  // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  const destinations = await Promise.all([
    prisma.destination.upsert({
      where: { slug: 'derbent' },
      update: {},
      create: {
        name: '–î–µ—Ä–±–µ–Ω—Ç',
        slug: 'derbent',
        description: '–°–∞–º—ã–π –¥—Ä–µ–≤–Ω–∏–π –≥–æ—Ä–æ–¥ –†–æ—Å—Å–∏–∏, –≤–∫–ª—é—á–µ–Ω–Ω—ã–π –≤ —Å–ø–∏—Å–æ–∫ –≤—Å–µ–º–∏—Ä–Ω–æ–≥–æ –Ω–∞—Å–ª–µ–¥–∏—è –Æ–ù–ï–°–ö–û',
        region: '–Æ–∂–Ω—ã–π –î–∞–≥–µ—Å—Ç–∞–Ω',
        latitude: 42.0678,
        longitude: 48.2899,
        isPopular: true,
        mainImage: '/images/destinations/derbent.jpg'
      }
    }),
    prisma.destination.upsert({
      where: { slug: 'gunib' },
      update: {},
      create: {
        name: '–ì—É–Ω–∏–±',
        slug: 'gunib',
        description: '–ñ–∏–≤–æ–ø–∏—Å–Ω–æ–µ –≥–æ—Ä–Ω–æ–µ —Å–µ–ª–æ —Å –±–æ–≥–∞—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π',
        region: '–ì–æ—Ä–Ω—ã–π –î–∞–≥–µ—Å—Ç–∞–Ω',
        latitude: 42.3867,
        longitude: 46.9328,
        isPopular: true,
        mainImage: '/images/destinations/gunib.jpg'
      }
    }),
    prisma.destination.upsert({
      where: { slug: 'karadakh' },
      update: {},
      create: {
        name: '–ö–∞—Ä–∞–¥–∞—Ö—Å–∫–∞—è —Ç–µ—Å–Ω–∏–Ω–∞',
        slug: 'karadakh',
        description: '–£–∑–∫–∏–π –∫–∞–Ω—å–æ–Ω —Å –æ—Ç–≤–µ—Å–Ω—ã–º–∏ —Å–∫–∞–ª–∞–º–∏',
        region: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –î–∞–≥–µ—Å—Ç–∞–Ω',
        latitude: 42.5,
        longitude: 47.0,
        isPopular: true,
        mainImage: '/images/destinations/karadakh.jpg'
      }
    }),
    prisma.destination.upsert({
      where: { slug: 'sulak' },
      update: {},
      create: {
        name: '–°—É–ª–∞–∫—Å–∫–∏–π –∫–∞–Ω—å–æ–Ω',
        slug: 'sulak',
        description: '–°–∞–º—ã–π –≥–ª—É–±–æ–∫–∏–π –∫–∞–Ω—å–æ–Ω –≤ –ï–≤—Ä–æ–ø–µ',
        region: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –î–∞–≥–µ—Å—Ç–∞–Ω',
        latitude: 43.0167,
        longitude: 46.8333,
        isPopular: true,
        mainImage: '/images/destinations/sulak.jpg'
      }
    })
  ])

  console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–æ ${destinations.length} –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π`)

  // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç—É—Ä—ã
  const tours = await Promise.all([
    prisma.tour.upsert({
      where: { slug: 'derbent-citadel-tour' },
      update: {},
      create: {
        title: '–î—Ä–µ–≤–Ω–∏–π –î–µ—Ä–±–µ–Ω—Ç –∏ —Ü–∏—Ç–∞–¥–µ–ª—å',
        slug: 'derbent-citadel-tour',
        description: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ —Å–∞–º—ã–π –¥—Ä–µ–≤–Ω–∏–π –≥–æ—Ä–æ–¥ –†–æ—Å—Å–∏–∏ —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º –∫—Ä–µ–ø–æ—Å—Ç–∏ –ù–∞—Ä—ã–Ω-–ö–∞–ª–∞ –∏ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.',
        shortDescription: '–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –¥—Ä–µ–≤–Ω–µ–π—à–µ–π –∫—Ä–µ–ø–æ—Å—Ç—å—é –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –î–µ—Ä–±–µ–Ω—Ç–∞',
        basePrice: 8500,
        duration: 2,
        difficulty: 'EASY',
        tourType: 'EXCURSION',
        maxPeople: 15,
        minPeople: 2,
        isActive: true,
        isPopular: true,
        destinationId: destinations[0].id,
        mainImage: '/images/tours/derbent-citadel.jpg'
      }
    }),
    prisma.tour.upsert({
      where: { slug: 'gunib-mountain-tour' },
      update: {},
      create: {
        title: '–ì–æ—Ä–Ω—ã–π –ì—É–Ω–∏–± –∏ –æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç–∏',
        slug: 'gunib-mountain-tour',
        description: '–ê–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö –≤ –æ–¥–Ω–æ–º –∏–∑ —Å–∞–º—ã—Ö –∂–∏–≤–æ–ø–∏—Å–Ω—ã—Ö –≥–æ—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –î–∞–≥–µ—Å—Ç–∞–Ω–∞ —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º –º–µ–º–æ—Ä–∏–∞–ª–∞ –∏ –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.',
        shortDescription: '–ì–æ—Ä–Ω—ã–µ —Ç—Ä–æ–ø—ã, –∫–∞–Ω—å–æ–Ω—ã –∏ –ø–∞–Ω–æ—Ä–∞–º–Ω—ã–µ –≤–∏–¥—ã',
        basePrice: 12000,
        duration: 3,
        difficulty: 'MEDIUM',
        tourType: 'ACTIVE',
        maxPeople: 12,
        minPeople: 3,
        isActive: true,
        isPopular: true,
        destinationId: destinations[1].id,
        mainImage: '/images/tours/gunib-mountains.jpg'
      }
    }),
    prisma.tour.upsert({
      where: { slug: 'karadakh-gorge-tour' },
      update: {},
      create: {
        title: '–ö–∞—Ä–∞–¥–∞—Ö—Å–∫–∞—è —Ç–µ—Å–Ω–∏–Ω–∞',
        slug: 'karadakh-gorge-tour',
        description: '–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ —É–∑–∫–∏–π –∫–∞–Ω—å–æ–Ω —Å –æ—Ç–≤–µ—Å–Ω—ã–º–∏ —Å–∫–∞–ª–∞–º–∏ –≤—ã—Å–æ—Ç–æ–π –¥–æ 150 –º–µ—Ç—Ä–æ–≤.',
        shortDescription: '–ü—Ä–æ–≥—É–ª–∫–∞ –ø–æ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–π –ö–∞—Ä–∞–¥–∞—Ö—Å–∫–æ–π —Ç–µ—Å–Ω–∏–Ω–µ',
        basePrice: 6500,
        duration: 1,
        difficulty: 'MEDIUM',
        tourType: 'ACTIVE',
        maxPeople: 10,
        minPeople: 2,
        isActive: true,
        isPopular: false,
        destinationId: destinations[2].id,
        mainImage: '/images/tours/karadakh-gorge.jpg'
      }
    }),
    prisma.tour.upsert({
      where: { slug: 'sulak-canyon-tour' },
      update: {},
      create: {
        title: '–°—É–ª–∞–∫—Å–∫–∏–π –∫–∞–Ω—å–æ–Ω –∏ –æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç–∏',
        slug: 'sulak-canyon-tour',
        description: '–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—É—Ä —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º —Å–∞–º–æ–≥–æ –≥–ª—É–±–æ–∫–æ–≥–æ –∫–∞–Ω—å–æ–Ω–∞ –ï–≤—Ä–æ–ø—ã –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ–º —Å –º–µ—Å—Ç–Ω–æ–π –∫—É–ª—å—Ç—É—Ä–æ–π.',
        shortDescription: '–ö–∞–Ω—å–æ–Ω, –≥–æ—Ä—ã –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
        basePrice: 18000,
        duration: 3,
        difficulty: 'MEDIUM',
        tourType: 'COMBINED',
        maxPeople: 8,
        minPeople: 2,
        isActive: true,
        isPopular: true,
        destinationId: destinations[3].id,
        mainImage: '/images/tours/sulak-canyon.jpg'
      }
    })
  ])

  console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–æ ${tours.length} —Ç—É—Ä–æ–≤`)

  // –°–æ–∑–¥–∞–µ–º —É—Å–ª—É–≥–∏
  const services = await Promise.all([
    prisma.service.create({
      data: {
        name: '–¢—Ä–∞–Ω—Å—Ñ–µ—Ä –∞–≤—Ç–æ–±—É—Å–æ–º',
        description: '–ö–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω—ã–π –∞–≤—Ç–æ–±—É—Å —Å –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–æ–º',
        serviceType: 'TRANSPORT',
        basePrice: 1500,
        unit: '–º–∞—Ä—à—Ä—É—Ç'
      }
    }),
    prisma.service.create({
      data: {
        name: '–î–∂–∏–ø–ø–∏–Ω–≥ —Ç—É—Ä',
        description: '–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫ —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º –¥–ª—è –≥–æ—Ä–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤',
        serviceType: 'TRANSPORT',
        basePrice: 5000,
        unit: '–¥–µ–Ω—å'
      }
    }),
    prisma.service.create({
      data: {
        name: '–¢—Ä–∞–Ω—Å—Ñ–µ—Ä –∏–∑ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞',
        description: '–í—Å—Ç—Ä–µ—á–∞ –≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç—É –ú–∞—Ö–∞—á–∫–∞–ª—ã',
        serviceType: 'TRANSPORT',
        basePrice: 2000,
        unit: '–ø–æ–µ–∑–¥–∫–∞'
      }
    }),
    prisma.service.create({
      data: {
        name: '–ì–æ—Ä–Ω—ã–π –≥–∏–¥',
        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≥–∏–¥ –¥–ª—è –≥–æ—Ä–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤',
        serviceType: 'GUIDE',
        basePrice: 4000,
        unit: '–¥–µ–Ω—å'
      }
    }),
    prisma.service.create({
      data: {
        name: '–ü—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –≤ –æ—Ç–µ–ª–µ',
        description: '–ö–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –≤ –æ—Ç–µ–ª–µ',
        serviceType: 'ACCOMMODATION',
        basePrice: 3500,
        unit: '–Ω–æ—á—å'
      }
    }),
    prisma.service.create({
      data: {
        name: '–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–≤—Ç—Ä–∞–∫',
        description: '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –¥–∞–≥–µ—Å—Ç–∞–Ω—Å–∫–∏–π –∑–∞–≤—Ç—Ä–∞–∫',
        serviceType: 'FOOD',
        basePrice: 500,
        unit: '—á–µ–ª–æ–≤–µ–∫/–¥–µ–Ω—å'
      }
    })
  ])

  console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–æ ${services.length} —É—Å–ª—É–≥`)

  // –°–æ–∑–¥–∞–µ–º —Å–≤—è–∑–∏ —Ç—É—Ä-—É—Å–ª—É–≥–∞
  await Promise.all([
    prisma.tourService.createMany({
      data: [
        { tourId: tours[0].id, serviceId: services[0].id, quantity: 1 },
        { tourId: tours[0].id, serviceId: services[3].id, quantity: 2 },
        { tourId: tours[1].id, serviceId: services[1].id, quantity: 2 },
        { tourId: tours[1].id, serviceId: services[3].id, quantity: 3 },
        { tourId: tours[1].id, serviceId: services[4].id, quantity: 2 },
        { tourId: tours[2].id, serviceId: services[1].id, quantity: 1 },
        { tourId: tours[3].id, serviceId: services[1].id, quantity: 2 },
        { tourId: tours[3].id, serviceId: services[3].id, quantity: 3 },
        { tourId: tours[3].id, serviceId: services[4].id, quantity: 2 },
        { tourId: tours[3].id, serviceId: services[5].id, quantity: 3 }
      ]
    })
  ])

  console.log('‚úÖ –°–æ–∑–¥–∞–Ω—ã —Å–≤—è–∑–∏ —Ç—É—Ä-—É—Å–ª—É–≥–∞')

  // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const testUser = await prisma.user.upsert({
    where: { email: 'guest@example.com' },
    update: {},
    create: {
      email: 'guest@example.com',
      name: '–ì–æ—Å—Ç–µ–≤–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
      role: 'TOURIST'
    }
  })

  // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –æ—Ç–∑—ã–≤—ã
  const reviews = await Promise.all([
    prisma.review.create({
      data: {
        userId: testUser.id,
        tourId: tours[0].id,
        rating: 5,
        title: '–ù–µ–∑–∞–±—ã–≤–∞–µ–º–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ!',
        comment: '–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç—É—Ä. –ì–∏–¥ –æ—á–µ–Ω—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ–± –∏—Å—Ç–æ—Ä–∏–∏ –î–µ—Ä–±–µ–Ω—Ç–∞. –í—Å–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!',
        photos: JSON.stringify([]),
        isVerified: true,
        isVisible: true
      }
    }),
    prisma.review.create({
      data: {
        userId: testUser.id,
        tourId: tours[1].id,
        rating: 5,
        title: '–ü–æ—Ç—Ä—è—Å–∞—é—â–∏–µ –≤–∏–¥—ã!',
        comment: '–ì—É–Ω–∏–± –ø–æ–∫–æ—Ä–∏–ª –Ω–∞—Å —Å–≤–æ–µ–π –∫—Ä–∞—Å–æ—Ç–æ–π. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ, –≤—Å–µ –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å.',
        photos: JSON.stringify([]),
        isVerified: true,
        isVisible: true
      }
    }),
    prisma.review.create({
      data: {
        userId: testUser.id,
        tourId: tours[3].id,
        rating: 5,
        title: '–õ—É—á—à–∏–π —Ç—É—Ä –≤ –∂–∏–∑–Ω–∏!',
        comment: '–°—É–ª–∞–∫—Å–∫–∏–π –∫–∞–Ω—å–æ–Ω - —ç—Ç–æ —á—Ç–æ-—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–µ! –°–ø–∞—Å–∏–±–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º –∑–∞ —Ç–∞–∫–æ–π –æ–ø—ã—Ç.',
        photos: JSON.stringify([]),
        isVerified: true,
        isVisible: true
      }
    })
  ])

  console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–æ ${reviews.length} –æ—Ç–∑—ã–≤–æ–≤`)

  console.log('üéâ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞!')
  console.log(`
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  ‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π: ${destinations.length}
  ‚Ä¢ –¢—É—Ä–æ–≤: ${tours.length}
  ‚Ä¢ –£—Å–ª—É–≥: ${services.length}
  ‚Ä¢ –û—Ç–∑—ã–≤–æ–≤: ${reviews.length}

üöÄ –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!
 `)
}

main()
  .catch((e) => {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })