#!/bin/bash

echo "üöÄ –î–µ–ø–ª–æ–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∞–π—Ç–∞ –î–∞–≥–µ—Å—Ç–∞–Ω –Ω–∞ Vercel"
echo "================================================="

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Vercel CLI
if ! command -v vercel &> /dev/null; then
    echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Vercel CLI..."
    npm i -g vercel
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
if [ ! -d .git ]; then
    echo "üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è..."
    git init
    git add .
    git commit -m "Initial commit: –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–π—Ç –î–∞–≥–µ—Å—Ç–∞–Ω"
    echo "‚úÖ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"
else
    echo "‚úÖ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞–π–¥–µ–Ω"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo ""
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
if [ -f .env.local ]; then
    echo "‚úÖ .env.local –Ω–∞–π–¥–µ–Ω"
else
    echo "‚ö†Ô∏è  .env.local –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ .env.example"
fi

# –î–µ–ø–ª–æ–π –Ω–∞ Vercel
echo ""
echo "üåê –î–µ–ø–ª–æ–π –Ω–∞ Vercel..."
echo "–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ Vercel:"
echo ""
echo "üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:"
echo "DATABASE_URL=your_vercel_postgres_url"
echo "RESEND_API_KEY=your_resend_api_key"
echo "RESEND_FROM_EMAIL=noreply@yourdomain.com"
echo "NEXTAUTH_URL=https://your-domain.vercel.app"
echo "NEXTAUTH_SECRET=your_secret_here"
echo "NEXT_PUBLIC_SITE_URL=https://your-domain.vercel.app"
echo ""

read -p "–ì–æ—Ç–æ–≤—ã –∫ –¥–µ–ø–ª–æ—é? (y/n): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    vercel --prod
    echo ""
    echo "üéâ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!"
    echo ""
    echo "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
    echo "1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Vercel –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"
    echo "2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL –≤ —Ä–∞–∑–¥–µ–ª–µ Storage"
    echo "3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ Resend.com –¥–ª—è email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
    echo "4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç"
    echo ""
    echo "üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ —Ñ–∞–π–ª–µ DEPLOY_GUIDE.md"
else
    echo "‚ùå –î–µ–ø–ª–æ–π –æ—Ç–º–µ–Ω–µ–Ω"
    echo "üìñ –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ DEPLOY_GUIDE.md –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è"
fi